import{a as v,b as x,c as B}from"./chunk-KEC65WDD.js";import{b as E,c as O}from"./chunk-IABBK5OK.js";import{a as L}from"./chunk-IJOGWUSA.js";import{a as l,b as d}from"./chunk-EFZNXUV7.js";import{a as R}from"./chunk-NCANGEQT.js";import{N as C,k as _}from"./chunk-B7TRBNR3.js";import{c as y}from"./chunk-TY2WWATK.js";import{b as S}from"./chunk-77Z4FAWZ.js";import{a as N}from"./chunk-LTOPIHVT.js";import{a as A}from"./chunk-IUMQMMIE.js";import{a as D}from"./chunk-M25S27FE.js";import{b as J}from"./chunk-XEYZDI33.js";import{b as w,h as t,n as i,v as k}from"./chunk-2WJMAHXV.js";import{b as U,e as I}from"./chunk-C4QCPH6A.js";import{e as f}from"./chunk-3GYLW4KZ.js";var V=f(U()),u=f(I()),g=f(J());var P=()=>k("getEnergyCashbackDomains");window.__wb_timing.cashbackRequireAt=performance.now();var o,h=!1;async function M(){await V.default.all([A(),D(),_(),R(),P(),v(),L()]).spread((e,a,n,c,r,s,m)=>{N(e),t.merge({siteAPIData:a}),t.merge({cashback:n}),t.set("lifetimeSavings",c),t.set("energyCashbackDomains",r),t.set(["couponView","elasticityUserDomain"],s),t.set("domainLists",m)}),i("ext_instant_init_notifs")||document.readyState!=="loading"?p():document.addEventListener("DOMContentLoaded",p)}async function p(e=!1){h=e;let a=t.get("siteAPIData"),n=u.default.get(a,"tld");w(n);let c=t.get("cashback");t.set("cashbackVisible",!1);let r=await l("emailCreateAccount");r&&JSON.parse(r)?.shouldLoadNotification&&(await d("emailCreateAccount"),y(u.default.get(c,"reward",null)));let s=await l("affiliateRedirect");if(s){let b=JSON.parse(s);t.set("affiliateRedirect",b),await d("affiliateRedirect")}let m=t.get(["deweyResult"]);T(m),q()}async function q(){S.emitter.on("result",async e=>{let a=await x();B(a),T(e)})}async function T(e){t.get("cashbackVisible")||!e||o||F(e)}async function F(e){if(!(o&&!h)){if(i("ext_to_eml_re_abe_checkout")||i("ext_to_eml_abe_checkout")||i("ext_to_ma_abe_checkout")){o=!0;let a=await E(e,["cartPage","checkoutPage"],{allowOnly:[g.BonusOfferType.firstTimeEmailActivationBonus,g.BonusOfferType.desktopToMobileAppBonus]});if(a){O(a);return}}o=!0,C(e,{devRewardTest:h}).then(()=>{o=t.get("cashbackVisible")})}}M();export{p as a};
