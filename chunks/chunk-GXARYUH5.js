import{a as x}from"./chunk-DWQLULSJ.js";import{d as h,j as g}from"./chunk-4MWWZMVF.js";import{c as R,n as d,v as E}from"./chunk-2WJMAHXV.js";import{e as S}from"./chunk-C4QCPH6A.js";import{e as f}from"./chunk-3GYLW4KZ.js";var a=f(S()),m=f(R());var k=(n=[])=>E("checkForExceptionTerms",n);var u="_el_",i="__key__",L="title",c="link",l="linkText",_=new Set(["runLimit","runInterval","runTime"]);function b(n,t){return Object.keys(t).reduce((r,e)=>{let s=t[e]===":scope"?n:n.querySelector(t[e]);return s&&(r[e]=s.nodeName==="A"&&e===c?s.getAttribute("href"):s.innerText),r},{})}function M(n,t){let o=[],r=n.querySelectorAll(t.query)??[];for(let e of r){let s=b(e,t.propScrape);s[u]=e,s[i]=(0,m.v4)(),o.push(s)}return o}function I(n,t,o,r){t[o].results.forEach(e=>{if(e[u].addEventListener("click",()=>r(o,e)),t[o].linkedClickable){let C=n.querySelectorAll(t[o].linkedClickable),p=a.default.find(C,v=>v?.innerText===e[L]);p&&p.addEventListener("click",()=>r(o,e))}})}async function w(n,t){n[t].foundLinks=a.default.reduce(n[t].results,(o,r)=>(r[c]&&(P(r[c])&&r[l]&&/https\:\/\/www\./.test(r[l])&&!/\s/.test(r[l])?o.push(r[l]):o.push(r[c])),o),[]),n[t].foundLinkCount=n[t].foundLinks.length,n[t].relevantLinks=n[t].foundLinkCount>0?await x(n[t].foundLinks):[],n[t].relevantLinkCount=n[t].relevantLinks?.length}async function X(n,t,o=()=>{}){let r=!1;for(let e in t)t[e].results=M(n,t[e]),t[e].hasClickListener?(I(n,t,e,o),r=t[e].results.length>0||r):t[e].hasNoLinks?(await w(t,e),r=t[e].relevantLinkCount>0||r):r=t[e].results.length>0||r;return r}function z(n){n.forEach(t=>{for(let o in t)t[o].results=[],t[o].relevantLinks=[],t[o].relevantLinkCount=0,t[o].foundLinks=[],t[o].foundLinkCount=0})}function P(n){return/google\.com\/search/.test(n)}function J(){let n=window.location.href;return P(n)?"googleAI":/chatgpt\.com/.test(n)?"chatGPT":/gemini\.google\.com/.test(n)?"gemini":"none"}async function N(n){let t=n.reduce((e,s)=>(s[i]||(s[i]=(0,m.v4)()),e.set(s[i],s),e),new Map),o=n.reduce((e,s)=>(e.push({id:s[i]??"",term:s[L]??""}),e),[]),{termChecks:r}=await k(o);return Object.keys(r).reduce((e,s)=>(r[s].excluded?e.excluded.push({object:r[s],info:t.get(s)??{}}):e.approved.push({object:r[s],info:t.get(s)??{}}),e),{approved:[],excluded:[]})}function T(){return d("llm_scrape_check_terms")}async function Q(n){if(!T())return;let t=[],o=new Map;for(let e in n){for(let s of n[e].results??[])o.set(s[i],e),t.push(s);n[e].exclusionsResult={approved:[],excluded:[]}}let r=await N(t);for(let e of r.approved)n[o.get(e.info[i])].exclusionsResult?.approved.push(e);for(let e of r.excluded)n[o.get(e.info[i])].exclusionsResult?.excluded.push(e)}function V(n,t={}){let o=!T();for(let r in n){if(o){t[r]={excluded:[],excludedCount:0,relevant:n[r].results??[],relevantCount:n[r].results?.length||0};continue}t[r]={excluded:[],excludedCount:n[r].exclusionsResult?.excluded.length||0,relevant:[],relevantCount:n[r].exclusionsResult?.approved.length||0},n[r].exclusionsResult?.approved.forEach(e=>{delete e.info[u],t[r].relevant.push(e.info)}),n[r].exclusionsResult?.excluded.forEach(e=>{delete e.info[u],t[r].excluded.push({...e.object,...e.info})}),n[r].exclusionsResult={approved:[],excluded:[]}}return t}function Z(n,t){return n({itemName:t,propDataType:{watchForClick:"boolean",hasClickListener:"boolean",hasNoLinks:"boolean"}}).reduce((r,e)=>{if(e.name){let s=n({itemName:e.name});s.length>0&&(e.propScrape=s.shift(),r[e.name]=e)}return r},{})}function ee(n,t){let o=n({itemName:t,propDataType:{watchForClick:"boolean",hasClickListener:"boolean",hasNoLinks:"boolean"}});if(o.length===0)return{query:"",propScrape:{}};let r=o.shift();return Object.keys(r).forEach(e=>{_.has(e)&&typeof r[e]=="string"&&/^\d+$/.test(r[e])&&(r[e]=parseInt(r[e]))}),r}function ne(n){return`${g}?domain=${n}`}function O(n){return`${h}/exclusions?d=${btoa(a.default.uniq(n).join(","))}`}function te(n){let t=O(n);window.open(t,"_blank","noopener,noreferrer")}export{i as a,b,X as c,z as d,J as e,T as f,Q as g,V as h,Z as i,ee as j,ne as k,O as l,te as m};
