import{a as g}from"./chunk-QCPV2SDO.js";import{d as P}from"./chunk-4MWWZMVF.js";import{G as R,z as I}from"./chunk-4MSTBY6L.js";import{c as _,e as S}from"./chunk-3GYLW4KZ.js";var w=_((m,D)=>{(function(s,e){typeof m=="object"&&typeof D<"u"?e(m,I()):typeof define=="function"&&define.amd?define(["exports","react"],e):(s=s||self,e(s.spinDelay={},s.react))})(m,function(s,e){let l={delay:500,minDuration:200,ssr:!0};function p(){let[n,t]=e.useState(!0);return e.useEffect(()=>{t(!1)},[]),n}function c(n,t){t=Object.assign({},l,t);let i=p()&&t.ssr,y=i&&n?"DISPLAY":"IDLE",[a,r]=e.useState(y),o=e.useRef(null);return e.useEffect(()=>{if(n&&(a==="IDLE"||i)){clearTimeout(o.current);let d=i?0:t.delay;o.current=setTimeout(()=>{if(!n)return r("IDLE");o.current=setTimeout(()=>{r("EXPIRE")},t.minDuration),r("DISPLAY")},d),i||r("DELAY")}!n&&a!=="DISPLAY"&&(clearTimeout(o.current),r("IDLE"))},[n,a,t.delay,t.minDuration,i]),e.useEffect(()=>()=>clearTimeout(o.current),[]),a==="DISPLAY"||a==="EXPIRE"}s.defaultOptions=l,s.useSpinDelay=c})});var f=S(I());var U=S(R());function L(s){return`${P}${s}`}function b({closeModal:s,iframeLandingPagePath:e,onSignUpComplete:l,onLoadComplete:p,onStepChange:c,requestPayload:n}){let t=(0,f.useRef)(null),[i,y]=(0,f.useState)(!1);(0,f.useEffect)(()=>{let r=new AbortController;return chrome.runtime.sendMessage({type:"embeddedSignUpCookieRelaxSameSiteProperty"}).then(o=>{y(!0)}),window.addEventListener("message",async function(o){let d=t.current;if(d&&o.source===d.contentWindow){let{data:u}=o;if(u.type==="embeddedSignUpLoaded")p(d);else if(u.type==="embeddedSignUpPageView")c&&c(u.pageName);else if(u.type==="embeddedSignUpClose")s();else if(u.type==="embeddedSignUpResponse"){let E=await chrome.runtime.sendMessage({type:"embeddedSignUpCookie",response:u.response});E.status==="success"&&(l&&l(E.payload),d.contentWindow?.postMessage({source:"sp-embedded-create-account-modal",status:"success"},"*"))}else u.type==="embeddedSignUpReady"&&d.contentWindow?.postMessage({type:"init-sp-embedded-create-account-modal",status:"success",payload:n},"*")}},{signal:r.signal}),()=>r.abort()},[]);let a="about:blank";return i&&(a=g()?`${L(e)}?step=offerSent`:L(e)),(0,U.jsx)("iframe",{ref:t,src:a,className:"w-full h-full"})}export{w as a,L as b,b as c};
