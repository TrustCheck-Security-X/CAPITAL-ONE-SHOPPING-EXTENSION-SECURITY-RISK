import{a as Fe}from"./chunk-TAISRZC3.js";import{a as Y}from"./chunk-N7WTV6VT.js";import{a as M,b as z}from"./chunk-EFZNXUV7.js";import{N as q,O as Le,a as ce,b as Re,c as G,d as xe,h as D,i as Ee,j as Pe}from"./chunk-B7TRBNR3.js";import{b as U}from"./chunk-77Z4FAWZ.js";import{a as Q}from"./chunk-M25S27FE.js";import{a as B,b as Ze}from"./chunk-J7QHBV67.js";import{a as ae}from"./chunk-BCG2KUGW.js";import{a as O}from"./chunk-2JQDE4PE.js";import{a as se}from"./chunk-YQ5KARKK.js";import{f as Ae}from"./chunk-4MWWZMVF.js";import{a as m,e as ve,f as De,g as J,h as i,n as b,o as y,q as nt,u as Te,v as F}from"./chunk-2WJMAHXV.js";import{a as ie,c as re,d as et}from"./chunk-W7K6NY26.js";import{g as _e,n as Se,s as Ke}from"./chunk-QWQLNDJC.js";import{b as W,c as tt}from"./chunk-WRIUWJSJ.js";import{G as Ie,z as ot}from"./chunk-4MSTBY6L.js";import{b as Ye,e as ne,f as Xe}from"./chunk-C4QCPH6A.js";import{e as ke,f as je}from"./chunk-ZRHTGYWI.js";import{e as E}from"./chunk-3GYLW4KZ.js";var L=E(Ye());Ke();var $=E(nt()),s=E(ne()),H=E(Xe());et();je();Ze();tt();var w=E(ne());var X=(t,e)=>{if(e)if(e.error){let{error:o,domain:n=null,url:r}=e,a=o.stack.split(`
`),c=a[0]+a[1];y("track",t,{url:r,domain:n,message:c})}else y("track",t,e)};var Ue=({displayable:t})=>typeof t=="boolean"?t:!0,Z=t=>t&&t.filter(Ue),_t=t=>{let e={...t,coupons:Z(t.coupons)};if((e.couponCount&&t.coupons&&e.coupons?t.coupons.length-e.coupons.length:0)>0&&(e.couponCount=e.coupons?.length),e.autoFallback&&(e.autoFallback={...e.autoFallback,coupons:Z(e.autoFallback.coupons)},(e.autoFallback.autoFallbackCouponsCount&&t.autoFallback?.coupons&&e.autoFallback.coupons?t.autoFallback.coupons.length-e.autoFallback.coupons.length:0)>0&&(e.autoFallback.autoFallbackCouponsCount=e.autoFallback.coupons?.length)),e.result){let n=(e.result.allCoupons??[]).reduce((r,a)=>Ue(a)?r:{...r,[a.code]:!0},{});e.result={...e.result,allCoupons:Z(e.result.allCoupons),coupons:Z(e.result.coupons)},e.result.coupons&&Object.keys(n).length>0&&(e.result.coupons=e.result.coupons.filter(({code:r})=>!(r in n)))}return e};function ue(t){return b("ext_coupons_skip_cashback_fallback")&&!xe()&&!!i.get("cashback")&&!i.get(["cashback","user","dismissed"])&&(t?.pageType==="cartPage"||t?.pageType==="checkoutPage")}var it=new Set(["rosewholesale.com"]),le=(t,e)=>w.default.isUndefined(t)?e:t,Ne=async t=>{t.pageReload&&await D("beforeReloadResult",JSON.stringify(t))};async function Ve(t,e,o,n,r){let{allCoupons:a,autoFallback:c,automaticCouponsRun:u,cashback:p,couponRunId:f,isSiteHub:l,isCouponsImmediate:d,platform:k}=r,S=i.get("thirdPartyDetections"),h;try{h=await De.tryCoupons(t,w.default.cloneDeep(e),w.default.get(o,"0"),n,{automaticCouponsRun:u,autoFallback:c,platform:k,isSiteHub:l,isCouponsImmediate:d,couponRunId:f,cashback:p,thirdPartyDetections:S,useSUCMultipleBanks:!0,multipleBankCouponList:o})}catch(_){throw h={error:"Tigger internal error",message:_.message},_}return w.default.assignInWith(h,{allCoupons:a,autoFallback:c,automaticCouponsRun:u,cashback:p,couponRunId:f,couponScriptType:"tigger",isSiteHub:l,isCouponsImmediate:d,originalCoupons:e,platform:k},le),Ne(h),h}async function Oe(t,e,o,n={}){let{allCoupons:r,autoFallback:a,automaticCouponsRun:c,cashback:u,couponRunId:p,isSiteHub:f,isCouponsImmediate:l}=n,d=new Date().getTime(),k,S=it.has(t);try{if(o&&o.length)if({"zoro.com":!0,"focuscamera.com":!0,"chewy.com":!0}[t]){let A=w.default.findIndex(e,R=>R.code==="WIKIBUY"||R.code==="CAPITALONE");if(A>=0){let R=o.pop();e[A]=w.default.clone(R),e=e.concat(w.default.clone(o))}else e=e.concat(w.default.clone(o))}else e.pop(),e=e.concat(w.default.clone(o));let h={auto:c,thirdPartyDetections:i.get("thirdPartyDetections")},_=await ve.run(e,h);k=new Date().getTime()-d;let I=w.default.cloneDeep(e),g=w.default.assignInWith({},_,{affiliateRedirect:S,allCoupons:r,autoFallback:a,automaticCouponsRun:c,cashback:u,couponRunId:p,couponScriptType:"asyncTigger",isSiteHub:f,isCouponsImmediate:l,originalCoupons:I,runTime:k,startTime:d},le);return Ne(g),w.default.some(g.coupons,P=>!w.default.isNumber(P.savings)||w.default.isNaN(P.savings))&&(setTimeout(()=>{X("asyncTiggerScriptError",{error:{stack:`Invalid savings
`},url:document.URL})}),g.errored=!0),g}catch(h){return X("asyncTiggerScriptError",{error:h,url:document.URL}),w.default.assignInWith({},{startTime:d,runTime:new Date().getTime()-d,affiliateRedirect:S,allCoupons:r,originalCoupons:e,automaticCouponsRun:c,autoFallback:a,isSiteHub:f,isCouponsImmediate:l,cashback:u,couponRunId:p,couponScriptType:"asyncTigger",errored:!0},le)}}async function rt(t){try{let e=await M("beforeReloadResult"),{savings:o}=JSON.parse(e);return await z("beforeReloadResult"),{savings:o}}catch(e){X("asyncPageDataError",{error:e,domain:t.domain})}}var Me=t=>F("getUserCoupon",t);var N=E(ne());function pe(t,e){switch(t){case"petco.com":return N.default.get(e,"pageData.order.total")>=3500;case"officedepot.com":{let o=N.default.get(e,"pageData.order.total");return N.default.get(e,"pageType")==="checkoutPage"&&o>=2500}case"staples.com":{let o=N.default.get(e,"pageData.order.total");return(N.default.get(e,"pageType")==="checkoutPage"||N.default.get(e,"pageType")==="cartPage")&&o>=5e3}default:return!0}}var de=t=>F("createShoppingTrip",t);var ee=!1,Ge;var V=i.select("couponView");function fe(){return m()==="ebay.com"&&i.get(["selfStandDown",`${m()}_${i.get("tabId")}`])}function ge(){return at()&&i.get("couponView","hasInitialized")!==void 0}function at(){let t=m(),e=t!=="amazon.com"&&i.get(["siteAPIData","siteData","cashback","reward","amount"])>0;if(!e)return!1;if(e){if(b("ext_coupons_immediate_all"))return!0;if(b("ext_coupons_immediate")){let o=i.get(["domainLists","couponsImmediateNotifList"])??[];return Array.isArray(o)&&o.includes(t)}}return!1}function $e({throttleAutoCoup:t,fromAutoCoupImmediateNotif:e}={}){let o=m();O(o)?i.get("deweyResult","pageType")==="checkoutPage"&&J({domain:"amazon.com_checkout",message:"triedCodes"}):J({domain:o,throttleAutoCoup:t,fromAutoCoupImmediateNotif:e,message:"triedCodes"})}function st(){let t=m();if(O(t)){if(i.get("deweyResult","pageType")==="checkoutPage")return null;let e=s.default.get(document.querySelector("#nav-link-accountList .nav-line-1, #nav-link-yourAccount .nav-line-1"),"textContent");return!!(e&&e.match(/hello/i)&&!e.match(/sign in/i))}return null}function he(){let t=i.get("platform"),e=V.get("result");if(sessionStorage.getItem("__wb_same_tab_auto")||sessionStorage.getItem("__r_reload_auto")||!e&&i.get(["couponView","autoCoupThrottled"]))return!1;let o=i.get("siteAPIData"),n=s.default.get(o,"siteData.coupons.type");if(n==="eeyore"||(i.get(["domainLists","autoCoupTestList"])??[]).includes(m())||b("mag_a_coup_test")&&t==="Magento")return!1;let a=n==="roo",c=m(),u=i.get("couponView"),p=i.get("deweyResult")||{},f=s.default.get(u,"autoCoupConfig.enabled")&&(s.default.get(u,"result.automaticCouponsRun")||!s.default.get(u,"result"))&&s.default.get(u,"initOrigin")!=="sitehub",l=!1;if(f){if(O(c)){let d=i.get("deweyResult","pageType");l=st(),d==="checkoutPage"&&(l=!0)}else l=!0;a&&T.dom.getRooPreapplieds(p)&&(l=!1)}return l}function So(){let t=!!i.get(["cashbackView","reward","amount"]),e=b("ac_elasticity_1"),o=i.get(["couponView","partnerGroupsList"])?.groupA?.includes(m());return t&&e&&o||t&&!e}function ze(){let t=i.get("siteAPIData");return!!s.default.get(t,"siteData.cashback.reward")||!s.default.get(t,"siteData.coupons.ignoreAffiliate")}function ct(){let t=i.get("siteAPIData"),e=s.default.get(t,"siteData.coupons.type"),o=he(),n=s.default.get(t,"siteData.coupons.stats.fbRate");return!!(b("disable_tc_notifs")&&o&&!ze()&&e!=="eeyore"&&n<.25)}function Io(t,e){let o=JSON.parse(sessionStorage.getItem("__s_sitehub_try_codes")),n=he();if(o||e===void 0&&n||e)return!0;let r=!0;if(b("ext_ae_api_v_2")){let a=i.get(["couponView","elasticityUserDomain"]);a&&!a?.i&&(r=a.s)}return!(ze()&&!r&&(!n||!t))}function vo({result:t,isFromNonAutoRun:e}={}){let o=i.get("cashbackView"),n=!!s.default.get(o,"reward.amount");ct()&&n&&(e||t&&t.savings<=0)&&(i.select("couponView").set("isQuietSavingsMiss",!0),ut())}function ut(){let t=i.get("deweyResult");i.get("cashbackVisible")&&i.set("cashbackVisible",!1),q(t)}var Do=({label:t,clickId:e,couponRunId:o}={})=>{let n=W(e),r=!!s.default.get(i.get("cashbackView"),"reward.amount"),a=i.get(["couponView","hasDeferredCouponRewards"]);y("trackClick","tryCodesButton","try codes",{clickId:e,couponRunId:o,redirectId:n,cashback:r}),Ee("couponNotification",t,"cta","primary",{redirect:!0,cashback:r&&!a,clickId:e,redirectId:n,couponRunId:o,triggerType:ce({isCouponsImmediate:ge()})})};async function Ce(t,e,o={}){let n=o.eligible,r=s.default.get(e,"siteData.coupons.userCouponsEnabled"),c=(n||r)&&pe(t,i.get("deweyResult"))?await Me({SITE_API_V3:Ae,domain:t}):null;return c&&y("track","userCouponReceived",{currentLocation:s.default.pick(window.location,["hash","host","hostname","href","origin","pathname","port","search"]),coupon:JSON.stringify(c.map(u=>u.code)),userCouponObj:JSON.stringify(c)}),c}function lt(){return!V.get("disableAffiliate")&&!i.get(["offers","coupons","disableAffiliate"])&&!G()&&!(i.get(["couponsAffiliateDisabledSites",`${m()}_${i.get("tabId")}`])>B())&&!(i.get(["couponsAffiliateDisabledSites",`${m()}_all`])>B())}async function j(t,e={}){let{fromAutoRun:o,autoSavings:n,clickEvent:r}=e;if(lt())try{let c=i.get(["couponView","hasDeferredCouponRewards"])&&(!b("ext_deferred_coupon_rewards_v_2")||n),u={autoRedirect:!b("ext_deferred_coupon_rewards_v_2"),destDomain:m(),channel:"coupons",subExperience:"coupons",credits:fe()||c?!1:!!i.get("cashback"),redirectId:W(t),vendorMetaId:fe()?void 0:i.get("cashback","id"),token:fe()?void 0:i.get("cashback","token"),clickEvent:r||o?"couponsModalClickCta":"tryCodesButton"},p,f=i.get("cashback","redirectUrl");if(f?(p=ie(f,{extensionVersion:chrome.runtime.getManifest().version,subExperience:u.subExperience,redirectId:u.redirectId,clickEvent:u.clickEvent}),u.autoRedirect||(p=re(p,!1))):p=se({params:u}),!u.autoRedirect){let l=await de(p);i.set(["couponView","tripId"],l.tripId),p=l.redirectUrl}p&&Fe({url:p})}catch{}}function To({clickId:t,fromAutoRun:e,autoSavings:o}={}){let n=t||H.default.v4().replace(/-/g,"");V.get("disableAffiliate")||j(n,{fromAutoRun:e,autoSavings:o})}async function Ao(t,{clickId:e,autoFallback:o,fromAutoRun:n,fromActivateRewards:r,autoSavings:a,codeEntered:c,clickEvent:u,couponRunId:p,shouldLoadEmailCreateAccountNotification:f}={}){let l=i.get("couponNotif")==="siteHub",d=ge(),k=m();i.set(["couponsAffiliateDisabledSites",`${k}_${i.get("tabId")}`],Se(_e(new Date,30)));let S=i.get(["couponView","hasDeferredCouponRewards"])&&(!b("ext_deferred_coupon_rewards_v_2")||a),h=t&&S&&!r&&(!n||!c)&&!l;h&&(t=!1);let _=[D("affiliateRedirect",JSON.stringify({redirected:!0,location:location.href,couponRunId:p,autoFallback:o,isSiteHub:l,isCouponsImmediate:d,fromAutoRun:n,hasCredits:t}))];if(f&&_.push(D("emailCreateAccount",JSON.stringify({shouldLoadNotification:!0}))),await L.default.all(_),t||h){let K={programId:i.get(["siteAPIData","programId"]),creditsDeferred:h};Le(K)}let I=e||H.default.v4().replace(/-/g,"");a||localStorage.setItem("__wb_redirecting",JSON.stringify({sameTabAuto:!0,isSiteHub:l,isCouponsImmediate:d,clickEvent:u}));let g=i.get("couponsConfig"),P=s.default.get(g,"affiliateLinkCurrentTab")&&s.default.get(g,"autoCoupConfig.enabled");(he()||l&&P)&&!a&&sessionStorage.setItem("__wb_same_tab_auto",JSON.stringify({sameTabAuto:!0,isSiteHub:l}));let A=t?"cashback":"coupons",R=await Pe(k);R&&(A="cashback-ims");let v={autoRedirect:!b("ext_deferred_coupon_rewards_v_2"),destUrl:location.href,channel:A,subExperience:"coupons",credits:t,redirectId:W(I),sameTab:!0,vendorMetaId:t?i.get("cashback","id"):null,token:t?i.get("cashback","token"):null,clickEvent:n?"couponsModalClickCta":r?"activateRewardsButton":"tryCodesButton",...!R&&{destDomain:i.get("siteAPIData","tld")}},C,x=i.get("cashback","redirectUrl");if(x?(C=ie(x,{extensionVersion:chrome.runtime.getManifest().version,subExperience:v.subExperience,redirectId:v.redirectId,sameTab:v.sameTab,clickEvent:v.clickEvent}),v.autoRedirect||(C=re(C,!1))):C=se({params:v}),v.autoRedirect)window.location.href=C;else{let K=await de(C);await D("tripId",K.tripId),window.location.href=K.redirectUrl}}function pt(){let t,e;sessionStorage.getItem("__wb_same_tab_auto")?t=JSON.parse(sessionStorage.getItem("__wb_same_tab_auto")):sessionStorage.getItem("__wb_redirecting")&&(e=JSON.parse(sessionStorage.getItem("__wb_redirecting")));let o=i.get("couponNotif")==="siteHub"||s.default.get(t,"isSiteHub")||s.default.get(e,"isSiteHub"),n=ge()||e?.isCouponsImmediate,r=s.default.get(e,"clickEvent"),a=!o&&(s.default.get(t,"sameTabAuto")||e);return{sameTabAuto:t,redirecting:e,tryCouponsSameTabRedirect:a,isSiteHub:o,isCouponsImmediate:n,clickEvent:r}}async function Ro({disableAffiliate:t,automaticCouponsRun:e,coupons:o,autoFallback:n,passedInClickId:r,couponRunId:a,cashback:c,isAsyncTigger:u}){let{sameTabAuto:p,isSiteHub:f,isCouponsImmediate:l}=pt();ke("TRY CODES"),ee=!0;let d=r||H.default.v4().replace(/-/g,"");a=a||H.default.v4(),n=n||p&&!f,sessionStorage.getItem("__wb_same_tab_auto")&&sessionStorage.removeItem("__wb_same_tab_auto");let k=m();t||j(d),y("track","tryCoupons",{clickId:e?null:d,redirectId:e?null:W(d),couponRunId:a,cashback:c,triggerType:ce({automaticCouponsRun:e,autoFallback:n,isSiteHub:f,isCouponsImmediate:l}),couponScriptType:u?"asyncTigger":"tigger",currentLocation:s.default.pick(window.location,["hash","host","hostname","href","origin","pathname","port","search"])});let S=await Q(k),h=i.get(["userCouponChecks",k]);await U.run({callSource:"coupons_start"});let _=Date.now(),I=s.default.get(S,"siteData.coupons.shopify")||i.get("platform")==="Shopify",g=[],P=await Ce(k,S,h);P&&(g=g.concat(P));let A=i.get(["platform"]),R=I||A,v=V.get("coupons"),C;if(u||R?C=await Oe(I?"shopify.com":m(),o,g,{automaticCouponsRun:e,autoFallback:n,platform:A,isSiteHub:f,isCouponsImmediate:l,couponRunId:a,cashback:c,allCoupons:v})||{}:C=await Ve(I?"shopify.com":m(),o,g,J,{automaticCouponsRun:e,autoFallback:n,platform:A,isSiteHub:f,isCouponsImmediate:l,couponRunId:a,cashback:c,allCoupons:v})||{},s.default.get(C,"bestCoupon"))try{let x=s.default.get(C,"bestCoupon.code");x&&(Ge=x.toLowerCase())}catch{}if(C.duration=new Date().getTime()-_,C){if(C.pageReload){await D("couponRun",JSON.stringify({clickId:d,result:C}));let x=i.get(["couponView","tripId"]);return x&&await D("tripId",x),{pageReload:!0}}return await be({result:C,clickId:d}),C}return{finishWithoutResult:!0}}function be({result:t,clickId:e}){sessionStorage.getItem("__wb_same_tab_auto")&&sessionStorage.removeItem("__wb_same_tab_auto"),V.set("resultTemp",s.default.assign(t,{clickId:e}));let o=i.get("siteAPIData"),n=!!s.default.get(o,"siteData.cashback.reward");return t&&t.automaticCouponsRun&&n?$e({throttleAutoCoup:!0}):$e(),ee=!1,U.run({callSource:"coupons_end",siteData:i.get("siteAPIData").siteData})}function dt(){let t="Capital One Shopping tests codes in seconds.";return i.get(["siteAPIData","siteData","coupons","stats","fbRate"])<=.05?t="Limited savings available, but it's still worth a try!":b("ext_shorten_notif_text")&&(t="Test codes in seconds."),t}function xo(){let t=m(),e=null;return O(t)||(e=dt()),e}async function Eo(){y("track","viewAllCodes",{currentLocation:s.default.pick(window.location,["hash","host","hostname","href","origin","pathname","port","search"])})}async function Po(t,e={}){let{origin:o,clickEvent:n}=e,r=H.default.v4().replace(/-/g,""),a=V.get("disableAffiliate"),c=i.get("siteAPIData","siteData","coupons","ignoreAffiliate"),u=i.get(["couponView","hasDeferredCouponRewards"]);(a===!1||a===void 0&&!c)&&!u&&j(r,{clickEvent:n}),y("trackClick","copyCouponCode",t,{clickId:r,origin:o})}var Lo=async({siteAPIData:t,domain:e}={})=>{let o=s.default.get(t,"siteData.coupons.script"),n=s.default.get(t,"siteData.coupons.type"),r=i.get("platform");if(r&&!o){let a=await J({message:"getPlatformIdentifiers",platformForIdentifiers:r,platformPageTypeForIdentifiers:"roo"});o=s.default.get(a,"script")}o&&(e==="etsy.com"?Qe(o):O(e)?gt(o):n!=="roo"&&ht(o))};async function He(t){let e=s.default.get(t,"siteData.coupons.identifiers"),o=document;return o.deweyParser=$.default,o.html=document.documentElement.innerHTML,await U.evaluateIdentifierTree(e,o)}async function Fo(){let t=await ft();if(t)return{...t,noScript:!0}}async function ft({checkOnce:t=!1}={}){let e=m(),o=await Q(e),n=await He(o);if(!n&&t&&b("ext_coupons_immediate_path_fallback")){let l=window.location.pathname;/^\/(cart|checkout)/i.test(l)&&(n=!0)}if(!n){if(t)return;await new L.default(l=>{U.emitter.on("result",async()=>{await He(o)&&l(!0)})})}let{coupons:r,ignoreAffiliate:a}=s.default.get(o,"siteData.coupons",{}),c=!1;if((a||i.get(["couponsAffiliateDisabledSites",`${e}_${i.get("tabId")}`])>B()||i.get(["couponsAffiliateDisabledSites",`${e}_all`])>B())&&(V.set("disableAffiliate",!0),c=!0),G())return;let u=await M("couponRun"),p=r&&r.length,f={coupons:r,estimatedRunTime:0,disableAffiliate:c,couponCount:p,affiliateLinkCurrentTab:s.default.get(o,"meta.affiliate_link_current_tab"),pageWasReloaded:!!u};return i.set("couponsConfig",f),f}function me(t,e){if(t){if(t.matches(e))return t;let o=t.querySelector(e);return o||(t.parentElement?me(t.parentElement,e):null)}}async function mt(t,e,o){if(!ee){let n;if(o?(n=me(o,e.promoInputSelector),setTimeout(()=>Qe(e),1500)):n=T.dom.getPromoCodeEl(e),n){let r=n.value;if(s.default.get(r,"length")&&r.toLowerCase()!==Ge){let a="userContributedCode";await Y({action:"getHoneyState",comp:"honey"})&&(a="userContributedCodeH");let u;try{let p=e.promoRemoveAction;u=me(o,p).textContent.trim()}catch{}y("track",a,{code:r,seller:u})}}}}async function Qe(t){try{if(t.promoApplyAction){let e=document.querySelectorAll(t.promoApplyAction);s.default.forEach(e,o=>{o.addEventListener("click",n=>mt(n,t,o))})}}catch{}}function Be(){return Array.from((0,$.default)('[name="dupOrderCheckArgs"]')).reduce((e,o)=>{let n={},r=o.value.split("|");n.asin=r[0],n.sellerId=r[3];let a=(0,$.default)(o).prev();return n.isPromoApplied=!!a.find(':contains("See order summary for discounts applied")').length||!!a.find(':contains("discount applied")').length,n.price=ae(a.find(".a-color-price .a-text-bold").text()),e[n.asin]=n,e},{})}async function gt(t){We(t);let e=window.location.href;setInterval(async()=>{let o=window.location.href;e!==o&&(e=o,await L.default.delay(1e3),We(t))},500)}async function We(t){function e(){return ae(T.dom.getElement(t.cartTotalSelector).innerText)}if(t.promoApplyAction){let o=T.dom.getElement(t.promoApplyAction);if(o){let n;o.addEventListener("click",async r=>{try{let c=T.dom.getPromoCodeEl(t).value;if(c){clearInterval(n);let u=e(),p=Be();await L.default.delay(500),await L.default.race([new L.default(I=>{try{n=setInterval(()=>{try{!(0,$.default)(".loading-spinner-blocker:visible").length&&!(0,$.default)(".section-overwrap:visible").length&&I()}catch{}},10)}catch{}}),L.default.delay(2e4)]),clearInterval(n);let f=e(),l=Be(),d=Object.keys(p).reduce((I,g)=>!p[g].isPromoApplied&&l[g]&&l[g].isPromoApplied?g:I,""),k=l[d],S,h,_;k&&(S=k.sellerId,h=p[d].price||0,_=d),y("track","userContributedCode",{code:c,savings:(u||0)-(f||0),productPrice:h,seller:S,product:_})}}catch{}})}}}async function Je(t){if(!ee){let e=T.dom.getPromoCodeEl(t);if(e){let o=e.value;if(s.default.get(o,"length")){let n="userContributedCode";await Y({action:"getHoneyState",comp:"honey"})&&(n="userContributedCodeH"),y("track",n,{code:o})}}}}async function ht(t){try{if(t.promoApplyAction){let e=T.dom.getElement(t.promoApplyAction);e&&e.addEventListener("click",async n=>{await Je(t)});let o=T.dom.getPromoCodeEl(t);o&&o.addEventListener("keydown",async n=>{if(n.code==="Enter"){let r=Je.bind(t);s.default.debounce(r,200)}})}}catch{}}var Uo=()=>"No Thanks, Activate Rewards",No=({couponCount:t,isTryCodesButton:e})=>e&&i.get(["cashback","isAwinDomain"])?"Apply Savings":e?"Try Codes":`Found ${t} ${t===1?"code":"codes"}`;var ye=i.select("couponView"),T=new Re(Te,{hasFeature:b,sendShoppingEvent:y,currentDomain:m,activateInPinnedTab:j,getSingleUseCouponsIfValid:Ce,siteCache:Q,handleResult:be,shouldCouponsStandDown:G,compStateCache:Y,domainLocalStorageGet:M,domainLocalStorageSet:D,domainLocalStorageRemove:z,getFromState:t=>i.get(t),onIsNotCouponPage:()=>{let t=i.get("deweyResult");ue(t)&&(y("trackError","couponsInitError","roo"),q(t))},onTryCode:t=>ye.set("currentCouponCode",t),disableAffiliate:()=>ye.set("disableAffiliate",!0),setRunning:t=>ye.set("rooRunning",t),setInState:(t,e)=>i.set(t,e),startDeweyRun:()=>U.run({callSource:"coupons_start"})});T.addListener(t=>F("rooPouch",t));var qe=E(ot());var we=E(Ie()),te,oe=class extends qe.Component{constructor(...e){super(...e),this.state={progress:0}}componentWillMount(){this.setInt(this.props.estimatedDuration)}setInt(e,o=100){clearInterval(this.intervalId),this.intervalId=setInterval(()=>{this.props.pause||(this.state.progress<100?this.setState({progress:this.state.progress+1}):clearInterval(this.intervalId))},Math.round(e/o)),te=this.intervalId}componentWillUnmount(){clearInterval(this.intervalId)}componentWillReceiveProps(e){!this.props.complete&&e&&e.complete&&(clearInterval(this.intervalId),this.setState({progress:100})),e.estimatedTimeLeft?(te&&clearInterval(te),this.setInt(e.estimatedTimeLeft,100-this.state.progress)):e.estimatedDuration&&(clearInterval(te),this.setInt(e.estimatedDuration,100-this.state.progress))}render(){let{progress:e}=this.state,o=10+e/100*90,n=Math.min(o,100),r=this.props.rounded?"rounded":"";return(0,we.jsx)("div",{id:"progress-bar-wrapper",className:`${r} progress-bar`,children:(0,we.jsx)("div",{className:"progress",style:{width:`${n}%`}})})}};oe.defaultProps={estimatedDuration:6e4};var an=oe;export{Z as a,_t as b,ue as c,rt as d,T as e,ge as f,at as g,$e as h,st as i,he as j,So as k,ct as l,Io as m,vo as n,Do as o,j as p,To as q,Ao as r,Ro as s,be as t,xo as u,Eo as v,Po as w,Lo as x,He as y,Fo as z,ft as A,Uo as B,No as C,an as D};
